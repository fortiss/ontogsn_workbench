# JavaScript Modules

This directory contains the core JavaScript modules for the OntoGSN frontend application.

| File | Purpose and Description |
| :--- | :--- |
| `queries.js` | This is the main application driver. It initializes the in-browser triplestore (Oxigraph), loads all the ontology (.ttl) files, and provides the core `run` method for executing SPARQL queries. It orchestrates the process of fetching query results and passing them to the appropriate visualization module, such as `graph.js` or `table renderer`. |
| `panes.js` | This module manages the main UI layout, specifically the left and right panes. It provides a centralized way to access these panes and, most importantly, manages the lifecycle of the "controller" (e.g., a graph, 3D model, or layered view) currently displayed in the right pane. This ensures that old views are properly destroyed before new ones are rendered. |
| `graph.js` | This module is responsible for rendering the primary GSN graph visualization using D3.js. It takes SPARQL query results and transforms them into a hierarchical tree of nodes (Goals, Strategies, Solutions, etc.) and links. It defines the visual appearance (shapes, colors, styles) for each GSN element and handles user interactions like zoom, pan, and click events on nodes. |
| `layers.js` | This module provides an alternative "swimlane" or layered visualization for the assurance case, also built with D3.js. It arranges GSN nodes into distinct vertical lanes based on their depth or a custom assignment function. This view is useful for understanding the flow and dependencies across different stages or architectural layers. |
| `model.js` | This module renders an interactive 3D model of a car using Three.js, with its geometry and parts defined in a `car.ttl` ontology file. It allows users to interact with parts of the car, and it can update the triplestore based on user actions (e.g., adding luggage). It also reacts to changes in the triplestore, for example by highlighting parts that are determined to be "overloaded" by a SPARQL rule. |
| `editor.js` | This module provides a simple user interface for authoring and editing GSN data. It presents a form where users can select an action (like "Create GSN node"), fill in details for the new element, and execute a SPARQL UPDATE query against the triplestore. It includes a preview of the generated query before execution. |
| `document.js` | This module is responsible for fetching and rendering Markdown documents within the UI. It can run a SPARQL query to find a document path and then displays its content. It includes a special feature that parses the Markdown for specific ontology-related tags (like `$roof-rack`), making them interactive elements that can display tooltips with information queried directly from the triplestore. |
| `code.js`     | This module dynamically fetches and displays code artifacts referenced in the knowledge graph. It queries the triplestore for code metadata (language, file path), fetches the code from the specified URL, and renders it within a UI panel with syntax highlighting. |
| `table.js`    | This module is responsible for rendering SPARQL query results in a tabular format. It dynamically creates an HTML table from the bindings returned by SPARQL SELECT queries, handling data display and basic formatting. It also manages user interactions for switching between different predefined SPARQL queries to display various data sets (e.g., nodes, relations). |
| `converter.js` | This module handles the conversion of ASCE XML (`.axml`) files into ASCE-shaped Turtle ABox data. It provides functions to parse XML, generate Turtle triples for nodes and links, and sets up a user interface for file selection, conversion, and downloading the resulting Turtle file. |